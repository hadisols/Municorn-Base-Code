<apex:page >
    <!-- Begin Default Content REMOVE THIS -->

    <!--
    This file is a standalone HTML page demonstrating usage of the Authorize.net
    Accept JavaScript library when integrated with your own payment form.

    For complete documentation for the Accept JavaScript library, see
    https://developer.authorize.net/api/reference/features/acceptjs.html
-->

    <body>


        <div class="container panel panel-default" style="margin-top:20px">
            <div class="form-horizontal formDiv" role="form" style="padding-top: 0px;">
                <div class="outer form-group" style="margin-right:0px;margin-left:0px;" onclick="setDefaultValue()">
                </div>
                <div class="form-group" style="margin-left: 0px; margin-right: 0px;">
                    <label class="control-label hidden-xs col-sm-3 col-md-3 col-lg-3" for="cardNumber">Card Number:</label>
                    <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                        <input type="text" class="form-control" id="CARDNUMBER_ID" placeholder="Card Number" maxlength="20" value="378282246310005"></input>
                    </div>
                </div>
                <div class="form-group" style="margin-left: 0px; margin-right: 0px;">
                    <label class="control-label hidden-xs col-sm-3 col-md-3 col-lg-3" for="cardNumber">Expiry (MM/YY):</label>
                    <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4">
                        <input type="text" class="form-control " maxlength="2" id="EXPIRY_MONTH_ID" placeholder="Month">
                        </input>
                    </div>
                    <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4">
                        <input type="text" maxlength="4" class="form-control" id="EXPIRY_YEAR_ID" placeholder="Year">
                        </input>
                    </div>
                </div>
                <div class="form-group" style="margin-left: 0px; margin-right: 0px;">
                    <label class="control-label hidden-xs col-sm-3 col-md-3 col-lg-3" for="cardNumber">CVV/ZIP</label>
                    <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4">
                        <input type="text" class="form-control " maxlength="3" id="CARD_CODE" placeholder="CVV">
                        </input>
                    </div>
                    <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4">
                        <input type="text" maxlength="5" class="form-control" id="ZIP_CODE" placeholder="ZIP">
                        </input>
                    </div>
                </div>
                <div class="form-group" style="margin-left: 0px; margin-right: 0px;">
                    <div class="col-md-offset-3 col-sm-offset-3 col-lg-offset-3 col-md-8 col-lg-8 col-sm-8">
                        <button type="submit" id="pay" class="btn btn-primary btn-lg btn-block" onclick="getSecureData()">Get Payment Nonce</button>
                    </div>
                </div>
                <div class="form-horizontal formDiv1" role="form">
                    <div class="form-group">
                        <label class="control-label col-sm-3" for="blob">Payment Nonce:</label>
                        <div class="col-sm-8">
                            <textarea class="form-control" id="blob" rows="6"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            var blob = "";
            function getSecureData() {
                var secureData = {},
                    authData = {},
                    cardData = {};
                cardData.cardNumber = document.getElementById('CARDNUMBER_ID').value;
                cardData.month = document.getElementById('EXPIRY_MONTH_ID').value;
                cardData.year = document.getElementById('EXPIRY_YEAR_ID').value;
                cardData.zip = document.getElementById('ZIP_CODE').value;
                cardData.cardCode = document.getElementById('CARD_CODE').value;

                secureData.cardData = cardData;
                authData.clientKey = '87jxENy9M82YhvbhCWB7zR4z7nEzq6EEPCX6y95XnuNP65kwwt7FSgaK7xQ5z7Aj';
                authData.apiLoginID = '84vMVmF6jP';
                secureData.authData = authData;
                Accept.dispatchData(secureData, 'responseHandler');
            }
            function responseHandler(response) {
                if (response.messages.resultCode === 'Error') {
                    for (var i = 0; i < response.messages.message.length; i++) {
                        console.log(response.messages.message[i].code + ':' + response.messages.message[i].text);
                        $("#blob").val(response.messages.message[i].code + ':' + response.messages.message[i].text);
                    }
                } else {
                    useOpaqueData(response.opaqueData)
                }
            }

            function useOpaqueData(responseData) {
                console.log(responseData.dataDescriptor);
                console.log(responseData.dataValue);
                $("#blob").val(responseData.dataValue);
            }

        </script>

    </body>

    <!-- End Default Content REMOVE THIS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"></link>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://jstest.authorize.net/v1/Accept.js" charset="utf-8"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"></link>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"></link>


</apex:page>